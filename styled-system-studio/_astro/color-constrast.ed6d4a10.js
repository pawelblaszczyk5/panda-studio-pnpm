import{r as A}from"./index.03be2d59.js";import{c as R}from"./panda.context.596bdd75.js";import{g as p,E as x}from"./icons.197eee5d.js";import{T as G}from"./token-content.ac72727e.js";import{T as S}from"./token-group.25a9fcf4.js";import{m as v,p as l,j as r}from"./jsx-runtime.5e1c725e.js";import{H as u}from"./hstack.067225b0.js";import{S as m}from"./stack.809b5254.js";import"./index.f669b601.js";import"./index.fe6623c6.js";const W={transform(a){const{justify:t,gap:e="10px",...s}=a;return{display:"flex",alignItems:"center",justifyContent:t,gap:e,flexDirection:"column",...s}}},T=(a={})=>W.transform(a,{map:v}),y=A.forwardRef(function(t,e){const{justify:s,gap:i,...n}=t,h=T({justify:s,gap:i});return A.createElement(l.div,{ref:e,...h,...n})});class C{constructor(){this.r=0,this.g=0,this.b=0,this.toString=()=>"<r: "+this.r+" g: "+this.g+" b: "+this.b+" >"}}class _{constructor(){this.WCAG_AA=!1,this.WCAG_AAA=!1,this.customRatio=void 0,this.toString=()=>"< WCAG-AA: "+(this.WCAG_AA?"pass":"fail")+" WCAG-AAA: "+(this.WCAG_AAA?"pass":"fail")+" >"}}let b=class{constructor(){this.fontSize=14,this.rgbClass=new C,this.isValidSixDigitColorCode=t=>/^(#)?([0-9a-fA-F]{6})?$/.test(t),this.isValidThreeDigitColorCode=t=>/^(#)?([0-9a-fA-F]{3})?$/.test(t),this.isValidColorCode=t=>this.isValidSixDigitColorCode(t)||this.isValidThreeDigitColorCode(t),this.isValidRatio=t=>typeof t=="number",this.convertColorToSixDigit=t=>"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3],this.hexToLuminance=t=>{if(!this.isValidColorCode(t))throw new Error("Invalid Color :"+t);this.isValidThreeDigitColorCode(t)&&(t=this.convertColorToSixDigit(t));const e=this.getRGBFromHex(t),s=this.calculateLRGB(e);return this.calculateLuminance(s)},this.check=(t,e,s,i)=>{if(typeof s<"u"&&(this.fontSize=s),!t||!e)return!1;const n=this.hexToLuminance(t),h=this.hexToLuminance(e),c=this.getContrastRatio(n,h);return typeof i<"u"?this.isValidRatio(i)?this.verifyCustomContrastRatio(c,i):!1:this.verifyContrastRatio(c)},this.checkPairs=(t,e)=>{const s=[];for(const i in t){const n=t[i];typeof n.fontSize<"u"?s.push(this.check(n.colorA,n.colorB,n.fontSize,e)):s.push(this.check(n.colorA,n.colorB,void 0,e))}return s},this.calculateLuminance=t=>.2126*t.r+.7152*t.g+.0722*t.b,this.isLevelAA=(t,e,s)=>this.check(t,e,s).WCAG_AA,this.isLevelAAA=(t,e,s)=>this.check(t,e,s).WCAG_AAA,this.isLevelCustom=(t,e,s)=>this.check(t,e,void 0,s).customRatio,this.getRGBFromHex=t=>{const e=new C;if(typeof t!="string")throw new Error("must use string");const s=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),n=parseInt(t.slice(5,7),16);return e.r=s,e.g=i,e.b=n,e},this.calculateSRGB=t=>{const e=new C;for(const s in t)e[s]=parseFloat((t[s]/255).toString());return e},this.calculateLRGB=t=>{const e=this.calculateSRGB(t),s=Object.create(this.rgbClass);let i=0;for(const n in e)i=parseFloat(e[n]),i<=.03928?s[n]=i/12.92:s[n]=Math.pow((i+.055)/1.055,2.4);return s},this.getContrastRatio=(t,e)=>{let s,i;return t>=e?(s=t,i=e):(s=e,i=t),(s+.05)/(i+.05)},this.verifyContrastRatio=t=>{const c=new _;return(this.fontSize||14)>=18?(c.WCAG_AA=t>=3,c.WCAG_AAA=t>=4.5):(c.WCAG_AA=t>=4.5,c.WCAG_AAA=t>=7),c},this.verifyCustomContrastRatio=(t,e)=>{const s=new _;s.toString=function(){return"< Custom Ratio: "+(this.customRatio?"pass":"fail")+"  >"};const i=Object.create(s);return i.customRatio=t>=e,i}}};const k=(a,t)=>{const e=new b;let s;try{s=e.checkPairs([{colorA:a,colorB:t,fontSize:14},{colorA:a,colorB:t,fontSize:18}])}catch{}return s},L=(a,t)=>{const e=new b;let s,i,n;try{s=e.hexToLuminance(a),i=e.hexToLuminance(t),n=e.getContrastRatio(s,i)}catch{}return n};function j(a){const{score:t,size:e}=a;return r.jsxs(r.Fragment,{children:[r.jsxs(u,{justify:"space-between",fontWeight:"medium",children:[r.jsxs(u,{gap:"2",children:[r.jsx("span",{children:t.WCAG_AA?r.jsx(p,{}):r.jsx(x,{})}),r.jsx("span",{children:"AA"})]}),r.jsx("span",{children:e==="regular"?"4.5:1":"3:1"})]}),r.jsxs(u,{justify:"space-between",fontWeight:"medium",children:[r.jsxs(u,{gap:"2",children:[r.jsx("span",{children:t.WCAG_AAA?r.jsx(p,{}):r.jsx(x,{})}),r.jsx("span",{children:"AAA"})]}),r.jsx("span",{children:e==="regular"?"7:1":"4.5:1"})]})]})}function P(){const a=R.getCategory("colors"),e=Array.from(a.values()).filter(o=>!o.isConditional&&!o.extensions.isVirtual).map(o=>({label:o.extensions.prop,value:o.value})),[s,i]=A.useState("#000000"),[n,h]=A.useState("#ffffff"),c=e.find(o=>o.label===s)?.value||s,d=e.find(o=>o.label===n)?.value||n,f=k(c,d),g=L(c,d);return r.jsx(S,{children:r.jsxs(G,{children:[r.jsxs(u,{gap:"3",p:"2",children:[r.jsx(l.div,{display:"flex",flexDirection:"column",borderWidth:"1px",borderColor:"card",flex:"1",pt:"16",style:{background:c},children:r.jsx("select",{value:s,onChange:o=>i(o.currentTarget.value),children:e.map(o=>r.jsx("option",{value:o.label,children:o.label},o.label))})}),r.jsx(l.div,{display:"flex",flexDirection:"column",borderWidth:"1px",borderColor:"card",flex:"1",pt:"16",style:{background:d},children:r.jsx("select",{value:n,onChange:o=>h(o.currentTarget.value),children:e.map(o=>r.jsx("option",{value:o.label,children:o.label},o.label))})})]}),r.jsx(u,{justify:"center",fontWeight:"semibold",fontSize:"2xl",p:"2",outline:"none",borderWidth:"1px",borderColor:"card",suppressContentEditableWarning:!0,contentEditable:!0,style:{background:d,color:c},children:"example text showing contrast"}),r.jsxs("div",{children:[r.jsxs(y,{textAlign:"center",gap:"2.5",children:[r.jsx(l.span,{fontWeight:"bold",fontSize:"4xl",children:g?`${g?.toFixed(2).replace(/[.,]00$/,"")}:1`:":"}),r.jsx(l.span,{fontWeight:"semibold",opacity:"0.5",children:"Contrast ratio"})]}),f&&r.jsxs(l.div,{display:"flex",gap:"5",marginTop:"10",children:[r.jsxs(m,{flex:"1",gap:"4",children:[r.jsx(l.span,{fontWeight:"semibold",children:"Normal Text"}),r.jsx(j,{score:f[0],size:"regular"})]}),r.jsxs(m,{flex:"1",gap:"4",children:[r.jsx(l.span,{fontWeight:"semibold",children:"Large Text"}),r.jsx(j,{score:f[1],size:"large"})]})]})]})]})})}export{P as ColorContrastChecker};
